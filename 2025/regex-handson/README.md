# 正規表現を用いたパスワード強度チェッカーを作ってみよう

## 概要

Webサービスなどで、「パスワードは8文字以上で、英大文字・小文字・数字・記号を1文字以上含むこと」といったパスワードチェッカーを見かけますよね？
これを**正規表現**を使ってゼロから実装してみるハンズオンです！

パスワードチェッカーを段階的に強化していくことで、正規表現の基礎から実践的な使い方まで学べます。

## 目的

- 正規表現の基本構文（メタ文字、文字クラス、量指定子）を理解する
- 先読み・後読み（Lookahead/Lookbehind）の仕組みと活用方法を学ぶ
- キャプチャグループと後方参照を使った高度なパターンマッチングを習得する
- 実践的なバリデーション処理を実装できるようになる

## 学習内容

### 6段階のレベル

| レベル  | 内容                             | 正規表現の学習ポイント                                        |
| ------- | -------------------------------- | ------------------------------------------------------------- |
| レベル1 | 8文字以上                        | 量指定子 `{8,}`                                               |
| レベル2 | 英小文字を含む                   | 肯定先読み `(?=...)`, 文字クラス `[a-z]`                      |
| レベル3 | 連続する同じ文字が3つ以上ない    | キャプチャグループ `(.)`, 後方参照 `\1`, 否定先読み `(?!...)` |
| レベル4 | 英大文字と数字を両方含む         | 文字クラスのショートハンド `\d`, 複数の先読み                 |
| レベル5 | 数字の直後に記号がある箇所を含む | 肯定後読み `(?<=...)`                                         |
| レベル6 | 先頭と末尾は英数字               | アンカー `^` `$`, 複雑なパターンの統合                        |

### 各レベルの正規表現

```javascript
// レベル1: 8文字以上
/.{8,}/

// レベル2: 8文字以上 + 英小文字を含む
/(?=.*[a-z]).{8,}/

// レベル3: レベル2 + 連続する同じ文字が3つ以上ない
/^(?!.*(.)\1\1)(?=.*[a-z]).{8,}$/

// レベル4: レベル3 + 英大文字と数字を両方含む
/^(?!.*(.)\1\1)(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/

// レベル5: レベル4 + 数字の直後に記号がある箇所を含む
/^(?!.*(.)\1\1)(?=.*[a-z])(?=.*[A-Z])(?=.*(?<=\d)[!@#$%^&*]).{8,}$/

// レベル6: レベル5 + 先頭と末尾は英数字
/^(?!.*(.)\1\1)(?=.*[a-z])(?=.*[A-Z])(?=.*(?<=\d)[!@#$%^&*])(?=.{8,}$)[a-zA-Z0-9].*[a-zA-Z0-9]$/
```

## 準備

### 必要なもの

- テキストエディタ（VS Code推奨）
- ブラウザ（Chrome, Firefox, Edge等）
- Deno（コマンドラインでテスト）

### ファイル構成

```
regex-handson/
├── README.md                      # このファイル
├── slide.md                       # スライド（Marp形式）
└── project/
    ├── index.html                 # パスワードチェッカーのUI
    ├── password-checker.js        # 実装ファイル（ここを編集）
    ├── password-checker.test.js   # テストケース
    └── test-runner.html           # ブラウザでテスト実行
```

## スライド

スライドはこちらからアクセスできます：

- [HTML版](https://jigintern.github.io/study_session_materials/regex-handson-2025/slide.html)
- [PDF版](https://jigintern.github.io/study_session_materials/regex-handson-2025/slide.pdf)

## ハンズオンの進め方

### ステップ0: 環境確認

1. `project/index.html` をブラウザで開く
2. パスワード入力欄に「Password1!」と入力
3. 動作確認（まだ実装していないので、すべて失敗します）

### ステップ1: レベル1を実装

1. `project/password-checker.js` を開く
2. `checkLevel1` 関数を実装

```javascript
export function checkLevel1(password) {
  return /.{8,}/.test(password);
}
```

3. `project/test-runner.html` を開いて「テスト実行」
4. レベル1のテストが通ることを確認

### ステップ2: レベル2〜6を実装

同様に `checkLevel2` 〜 `checkLevel6` を実装していきます。

スライドや `password-checker.js` のコメントを参考にしてください。

**注意**: レベル3以降では、前のレベルの正規表現を含める必要があります。

### ステップ4: 動作確認

1. `project/index.html` で色々なパスワードを試す
2. 強度が段階的に変化することを確認

## テストの実行方法

### A.ブラウザで実行

`project/test-runner.html` をブラウザで開いて「テスト実行」をクリック

### B. Denoで実行

```bash
cd project
deno test password-checker.test.js
```

事前に用意されたすべてのテストケースが実行されます。

## 参考リンク

- [MDN Web Docs - 正規表現](https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_Expressions)
- [Regexper](https://regexper.com/) - 正規表現の視覚化ツール

## ライセンス

MIT License
